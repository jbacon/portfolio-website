# Markdown To React

Today's post we walk-through how to import and render markdown.

### Background

Writing Markdown is far easier than writing HTML/JSX, and it's especially handy when blogging.
This site, initially built using pure JSX, now supports articles written in either Markdown or JSX.
Let's make life easier, and write Markdown.

### TODOs

- Build a Markdown Component
- Dynamically Import Markdown File(s)
- Style Markdown Component

### Packages Used

- npm: [react-markdown](https://www.npmjs.com/package/react-markdown)
- npm: [react-highlight](https://www.npmjs.com/package/react-highlight)
- npm: [remark-gfm](https://www.npmjs.com/package/remark-gfm)

### Markdown Component

Basic example of [react-markdown](https://www.npmjs.com/package/react-markdown)

```jsx
import ReactMarkdown from "react-markdown";

const MyMarkdown = (props) => {
  return <ReactMarkdown source={props.markdown} />;
};
```

Simple enough. `source` is the markdown plain text string. All conversions are handled automatically.
There are many available properties on this component library, which we may find interesting.

### Markdown Dynamic Importer

The complicated part...

```jsx
import React from "react";

const MyMarkdownImporter = (props) => {
  const [markdown, setMarkdown] = React.useState("");

  React.useEffect(() => {
    var asyncFunction = async () => {
      try {
        const importResult = await import(`../blogs/` + props.route);
        const result = await fetch(importResult.default);
        const text = await result.text();
        setMarkdown(text);
      } catch (e) {
        console.log(e);
        throw Error("Failed to fetch markdown file");
      }
    };
    asyncFunction();
  }, [props]);

  return <MyMarkdown markdown={markdown} />;
};
```

Markdown files cannot be `imported` directly as text without making crummy WebPack configurations. This is especially troubling if running a unejected CRA.
The code above demonstrates how to `fetch` Markdown as plain text, using the resource `url` provided by our `import` result.
However, we're not out of the water yet, unfortunately `import` cannot work on truly dynamically resources, therefore it must be prefixed with a `hard-coded` path. You can read about dynamic imports here: [WebPack](https://webpack.js.org/api/module-methods/#dynamic-expressions-in-import)

### Styled Markdown Component

Default html generated by react-markdown, while functional, can probably use some styling. This can be solved by custom renderers

```jsx
import React from "react";

const MyStyledMarkdown = (props) => {
  return (
    <ReactMarkdown
      renderers={{
        // https://github.com/remarkjs/react-markdown#appendix-b-node-types
        heading: (props) => (
          <Typography
            style={{ paddingTop: 30 - props.level * 3 }}
            variant={"h" + (props.level + 1)}
            {...props}
          />
        ),
        paragraph: (props) => <Typography {...props} />,
        link: (props) => <Link2 {...props} />,
        code: ({ language, value }) => (
          <Highlight className={language} children={value} />
        ),
        inlineCode: (props) => (
          <code style={{ background: "#232323" }} {...props} />
        ),
      }}
      plugins={[[gfm, { singleTilde: false }]]}
      source={props.markdown}
    />
  );
};
```

The `renderers` property allows us to override the generated html components. This blog uses `material-ui`, so in order to achieve uniform design, I overrode the different renderer node types that I needed.

## Conclusion

That's all it takes to render Markdown in your React app. Markdown files can be conveniently sourced in git along with the rest of your blog static site content.I hope this article was helpful! Thanks for stopping by. Leave me a comment below.
